(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[368],{9090:function(e,a,t){Promise.resolve().then(t.bind(t,1987))},1987:function(e,a,t){"use strict";t.d(a,{default:function(){return y}});var r=t(4004),n=t(4978);function s(e,a,t){return Math.min(Math.max(e,a),t)}function l(e){let{maximumFractionDigits:a=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:a}).format(Number.isFinite(e)?e:0)}function i(e){let{maximumFractionDigits:a=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"".concat(function(e){let{maximumFractionDigits:a=2}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Intl.NumberFormat("en-US",{maximumFractionDigits:a}).format(Number.isFinite(e)?e:0)}(e,{maximumFractionDigits:a}),"%")}function o(e){let{label:a,value:t,onChange:n}=e;return(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"block text-sm text-neutral-600 mb-2",children:a}),(0,r.jsx)("input",{type:"number",value:t,onChange:e=>n(Number(e.target.value)),className:"w-full border border-neutral-300 rounded-md px-3 py-2 text-sm"})]})}function c(e){let{inputs:a,setInputs:t}=e,n=(e,r)=>t({...a,[e]:r});return(0,r.jsxs)("div",{className:"space-y-10",children:[(0,r.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border border-neutral-200 p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-medium mb-6",children:"Facility Profile"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsx)(o,{label:"Annual Tons Processed",value:a.annualTonsProcessed,onChange:e=>n("annualTonsProcessed",e)}),(0,r.jsx)(o,{label:"Avg Material Cost per Ton ($)",value:a.avgMaterialCostPerTon,onChange:e=>n("avgMaterialCostPerTon",e)}),(0,r.jsx)(o,{label:"Annual Revenue ($)",value:a.annualFabricationRevenue,onChange:e=>n("annualFabricationRevenue",e)}),(0,r.jsx)(o,{label:"Annual Fabrication Labor Cost ($)",value:a.annualFabricationLaborCost,onChange:e=>n("annualFabricationLaborCost",e)}),(0,r.jsx)(o,{label:"Contribution Margin (%)",value:a.incrementalContributionMarginPct,onChange:e=>n("incrementalContributionMarginPct",e)})]})]}),(0,r.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border border-neutral-200 p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-medium mb-6",children:"Impact Assumptions"}),(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-neutral-700 mb-3",children:"Material Efficiency"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsx)(o,{label:"Current Scrap Rate (%)",value:a.currentScrapRatePct,onChange:e=>n("currentScrapRatePct",e)}),(0,r.jsx)(o,{label:"Target Scrap Rate (%)",value:a.targetScrapRatePct,onChange:e=>n("targetScrapRatePct",e)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-neutral-700 mb-3",children:"Labor Rework"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsx)(o,{label:"Preventable Rework (% of labor)",value:a.preventableReworkLaborPct,onChange:e=>n("preventableReworkLaborPct",e)}),(0,r.jsx)(o,{label:"Rework Reduction (%)",value:a.reworkReductionPct,onChange:e=>n("reworkReductionPct",e)})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-neutral-700 mb-3",children:"Throughput Capacity"}),(0,r.jsx)("div",{className:"grid md:grid-cols-2 gap-6",children:(0,r.jsx)(o,{label:"Throughput Improvement (%)",value:a.throughputImprovementPct,onChange:e=>n("throughputImprovementPct",e)})})]}),(0,r.jsxs)("details",{className:"border border-neutral-200 rounded-lg p-4",open:a.includeOversightRisk,children:[(0,r.jsx)("summary",{className:"cursor-pointer text-sm font-semibold text-neutral-700",children:"Include Oversight & Risk Model"}),(0,r.jsxs)("div",{className:"mt-4 grid md:grid-cols-2 gap-6",children:[(0,r.jsx)(o,{label:"Annual QA / Inspection Cost ($)",value:a.annualQALaborCost,onChange:e=>n("annualQALaborCost",e)}),(0,r.jsx)(o,{label:"Annual Major Error Cost ($)",value:a.annualMajorErrorCost,onChange:e=>n("annualMajorErrorCost",e)}),(0,r.jsx)(o,{label:"Error Reduction (%)",value:a.errorReductionPct,onChange:e=>n("errorReductionPct",e)}),(0,r.jsxs)("label",{className:"flex items-end gap-2 text-sm text-neutral-700",children:[(0,r.jsx)("input",{type:"checkbox",checked:a.includeOversightRisk,onChange:e=>n("includeOversightRisk",e.target.checked)}),"Enable oversight/risk contribution"]})]})]})]})]})]})}function d(e){let{acronym:a,caption:t}=e,[s,l]=(0,n.useState)(!1),[i,o]=(0,n.useState)(!1),c=s||i;return(0,r.jsxs)("span",{className:"relative inline-flex items-center align-baseline",children:[(0,r.jsx)("button",{type:"button",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),onFocus:()=>l(!0),onBlur:()=>l(!1),onClick:()=>o(e=>!e),className:"inline-flex items-center rounded px-1 text-inherit decoration-dotted underline-offset-2 transition-colors hover:bg-neutral-100 hover:text-neutral-900 hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-400","aria-expanded":c,"aria-label":"".concat(a,": ").concat(t),children:a}),c?(0,r.jsx)("span",{className:"absolute left-0 top-full z-20 mt-1 w-64 rounded-md border border-neutral-700 bg-neutral-900 px-3 py-2 text-left text-[11px] font-normal normal-case tracking-normal text-white shadow-lg",children:t}):null]})}function u(e){let{title:a,value:t}=e;return(0,r.jsxs)("div",{className:"rounded-md border border-neutral-700 p-4",children:[(0,r.jsx)("div",{className:"text-neutral-400 text-xs mb-1",children:a}),(0,r.jsx)("div",{className:"text-base font-semibold",children:t})]})}function m(e){let{results:a}=e,t=(0,n.useRef)(null),[s,o]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=t.current;if(!e)return;let a=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting&&(o(!0),a.disconnect())},{threshold:.25});return a.observe(e),()=>{a.disconnect()}},[]),(0,r.jsxs)("section",{className:"bg-neutral-900 text-white rounded-xl p-8 space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-6",children:["Annual ",(0,r.jsx)(d,{acronym:"EBITDA",caption:"Earnings Before Interest, Taxes, Depreciation, and Amortization"})," Impact"]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-4 gap-6 text-sm",children:[(0,r.jsx)(u,{title:"Material Savings",value:l(a.material.dollarsSaved)}),(0,r.jsx)(u,{title:"Labor Savings",value:l(a.labor.dollarsSaved)}),(0,r.jsx)(u,{title:"Throughput Contribution",value:l(a.throughput.ebitdaContribution)}),(0,r.jsx)(u,{title:"Oversight / Risk",value:l(a.oversightRisk.dollarsSaved)})]})]}),(0,r.jsxs)("div",{ref:t,className:"border-t border-neutral-700 pt-6 transition-all duration-500 ease-out ".concat(s?"opacity-100 translate-y-0":"opacity-0 translate-y-4"),children:[(0,r.jsx)("div",{className:"text-3xl font-semibold",children:l(a.totals.annualEbitdaIncrease)}),(0,r.jsxs)("div",{className:"text-neutral-400 mt-2",children:["EBITDA Margin Improvement: +",i(a.totals.ebitdaMarginImprovementPct)]})]}),(0,r.jsxs)("div",{className:"border-t border-neutral-700 pt-6 text-sm text-neutral-300",children:[(0,r.jsx)("div",{className:"font-medium mb-3",children:"Execution Infrastructure Investment Range"}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Low Friction"}),(0,r.jsxs)("span",{children:[l(a.pricing.lowFrictionAnnual)," / year"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Base"}),(0,r.jsxs)("span",{children:[l(a.pricing.baseAnnual)," / year"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"Full Deployment"}),(0,r.jsxs)("span",{children:[l(a.pricing.aggressiveAnnual)," / year"]})]})]})]})}var x=t(4164),b=t.n(x);function h(e,a){return a.reduce((a,t,r)=>a+t/Math.pow(1+e,r),0)}function p(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,t=a;for(let a=0;a<1e3;a++){let a=0,r=0;for(let n=0;n<e.length;n++)a+=e[n]/Math.pow(1+t,n),r-=n*e[n]/Math.pow(1+t,n+1);if(1e-7>Math.abs(r))break;let n=t-a/r;if(!Number.isFinite(n)||n<=-.9999)break;if(1e-7>Math.abs(n-t))return n;t=n}for(let a=-.9;a<=1.5;a+=.01)if(.001>Math.abs(h(a,e)))return a;return null}function v(e){let{label:a,value:t,onChange:n}=e;return(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"block text-sm text-neutral-600 mb-2",children:a}),(0,r.jsx)("input",{type:"number",value:t,onChange:e=>n(Number(e.target.value)),className:"w-full border border-neutral-300 rounded-md px-3 py-2 text-sm"})]})}function g(e){let{title:a,value:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm text-neutral-500",children:a}),(0,r.jsx)("div",{className:"text-lg font-semibold mt-1",children:t})]})}function j(e){let{label:a,value:t}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-neutral-400 text-xs uppercase tracking-wide",children:a}),(0,r.jsx)("div",{className:"text-xl font-semibold mt-2",children:t})]})}let f={low:.75,base:1,high:1.35},R={low:.08,base:.12,high:.15};function N(e){let{perFacilityEbitdaIncrease:a,perFacilityRevenue:t}=e,s={EBITDA:()=>(0,r.jsx)(d,{acronym:"EBITDA",caption:"Earnings Before Interest, Taxes, Depreciation, and Amortization"}),ARR:()=>(0,r.jsx)(d,{acronym:"ARR",caption:"Annual Recurring Revenue"}),NRR:()=>(0,r.jsx)(d,{acronym:"NRR",caption:"Net Revenue Retention"}),LTV:()=>(0,r.jsx)(d,{acronym:"LTV",caption:"Lifetime Value"}),ROI:()=>(0,r.jsx)(d,{acronym:"ROI",caption:"Return on Investment"}),NPV:()=>(0,r.jsx)(d,{acronym:"NPV",caption:"Net Present Value"}),IRR:()=>(0,r.jsx)(d,{acronym:"IRR",caption:"Internal Rate of Return"}),SaaS:()=>(0,r.jsx)(d,{acronym:"SaaS",caption:"Software as a Service"}),RD:()=>(0,r.jsx)(d,{acronym:"R&D",caption:"Research and Development"}),GA:()=>(0,r.jsx)(d,{acronym:"G&A",caption:"General and Administrative"})},[o,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)("base"),[x,N]=(0,n.useState)("base"),[w,y]=(0,n.useState)(100),[P,C]=(0,n.useState)(3),[M,S]=(0,n.useState)(5),[A,k]=(0,n.useState)(10),[F,E]=(0,n.useState)(8),[I,T]=(0,n.useState)(8),[L,D]=(0,n.useState)(8e3),[B,Y]=(0,n.useState)(12e3),[V,O]=(0,n.useState)(7e4),[U,G]=(0,n.useState)(5),[_,z]=(0,n.useState)(12),[Q,H]=(0,n.useState)(80),[$,q]=(0,n.useState)(25),[J,K]=(0,n.useState)(18),[W,X]=(0,n.useState)(12),Z=(0,n.useMemo)(()=>{let e=Math.max(1,P),r=Math.max(1,M),n=w/e,s=f[u],l=R[x],i=a*s,o=Math.max(0,U/100),c=Math.max(0,1-o+Math.max(0,_/100)),d=Math.max(0,Q/100),m=Math.max(0,$/100),b=Math.max(0,J/100),v=Math.max(0,W/100),g=0,j=0,N=0,y=null,C=[0],S=[],k=[],E=[];for(let a=1;a<=r;a++){let t=a<=e?n*a:w,r=a<=e?n:0,s=t*i,o=r*(L+B),u=t*V,x=s-o-u;g+=s,j+=o+u,N+=x,C.push(x),null===y&&N>0&&(y=a),r>0&&E.push({yearStarted:a,facilities:r,arrPerFacility:i*l});let h=0;E.forEach(e=>{let t=Math.pow(c,a-e.yearStarted),r=e.facilities*e.arrPerFacility*t;h+=r}),S.push(h);let p=h*d,f=h*(m+b+v);k.push(p-f)}let T=i*w,D=t*w,Y=j>0?N/j:0,O=h(Math.max(0,A/100),C),G=p(C),z=S[0]||0,H=S[S.length-1]||0,q=r>1&&z>0?Math.pow(H/z,1/(r-1))-1:0,K=k[k.length-1]||0,X=H>0?K/H*100:0,Z=H*I,ee=K*F,ea=o>0&&E.length>0?E[0].arrPerFacility*d/o:null,et=E.map(e=>{let a=r-e.yearStarted;return{label:"Cohort Year ".concat(e.yearStarted),value:e.facilities*e.arrPerFacility*Math.pow(c,a)}});function er(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=a*t*n,o=[],u=[],x=[],g=[0],j=Math.max(1,Math.ceil(e*s)),f=w/j,R=0,N=null;for(let e=1;e<=r;e++){let a=e<=j?f*e:w,t=e<=j?f:0,r=a*i-t*(L+B)-a*V;R+=r,g.push(r),null===N&&R>0&&(N=e),t>0&&o.push({yearStarted:e,facilities:t,arrPerFacility:i*l});let n=0;for(let a of o){let t=e-a.yearStarted;n+=a.facilities*a.arrPerFacility*Math.pow(c,t)}u.push(n);let s=n*d,h=n*(m+b+v);x.push(s-h)}let y=u[0]||0,P=u[u.length-1]||0,C=r>1&&y>0?Math.pow(P/y,1/(r-1))-1:0,M=x[x.length-1]||0,S=P>0?M/P*100:0,k=p(g);return{finalARR:P,arrCAGR:C,netRevenueRetentionPct:100*c,ebitdaMarginPct:S,irrPct:null!==k?100*k:0,npv:h(Math.max(0,A/100),g),paybackYear:N,arrValuationImpact:P*I,ebitdaValuation:M*F,ruleOf40Pct:100*C+S}}return{safeProjectionYears:r,cumulativeImpact:g,cumulativeNet:N,paybackYear:y,roiMultiple:Y,annualPortfolioImpact:T,portfolioMarginLiftPct:D>0?T/D*100:0,npv:O,irr:G,arrByYear:S,saasEbitdaByYear:k,finalYearARR:H,arrCagr:q,arrValuationImpact:Z,netRevenueRetentionPct:100*c,finalYearSaasEbitda:K,saasEbitdaMarginPct:X,ebitdaValuationImpact:ee,ruleOf40Pct:100*q+X,ltvPerFacility:ea,cohortFinalYearContributions:et,scenarios:[{name:"Low",multiplier:f.low},{name:"Base",multiplier:f.base},{name:"High",multiplier:f.high}],annualNetCashFlows:C.slice(1),scenarioSnapshots:{low:er(f.low),base:er(f.base),high:er(f.high)},downsideSnapshot:er(f.base,.8,1.25)}},[V,I,x,P,A,_,W,U,Q,L,B,a,t,M,J,$,u,w,F]);async function ee(){try{let e={meta:{companyName:"Reality Anchors",docTitle:"Board Brief",schemaVersion:"1.0.0",confidentialityLine:"Confidential â€” Board Use Only",baseUrl:window.location.origin,logoPath:"/ra-logo.png"},customerEconomics:{materialSaved:.45*a,laborSaved:.2*a,throughput:.25*a,oversight:.1*a,totalEbitda:a,marginDeltaPct:t>0?a/t*100:0,pricingLow:.08*a,pricingBase:.12*a,pricingHigh:.15*a},ramp:{totalFacilities:w,deploymentYears:P,projectionYears:Z.safeProjectionYears,annualNetCashFlows:Z.annualNetCashFlows,paybackYear:Z.paybackYear,npv:Z.npv,irr:Z.irr},saasEconomics:{finalARR:Z.finalYearARR,arrCAGR:Z.arrCagr,nrrPct:Z.netRevenueRetentionPct,grossMarginPct:Q,finalEbitda:Z.finalYearSaasEbitda,ebitdaMarginPct:Z.saasEbitdaMarginPct,arrValuation:Z.arrValuationImpact,ebitdaValuation:Z.ebitdaValuationImpact},scenarios:Z.scenarioSnapshots,downsideScenario:Z.downsideSnapshot,evidenceTags:{totalEbitda:"Estimated",npv:"Modeled",irr:"Modeled",arrCAGR:"Modeled",netRevenueRetention:"Assumed",ebitdaMargin:"Modeled"}},r=await fetch("/api/export-board-deck",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok){let e="Unable to export board deck.";try{let a=await r.json();if(e=(null==a?void 0:a.message)||e,(null==a?void 0:a.error)==="PDF_ENGINE_UNAVAILABLE"&&(null==a?void 0:a.htmlPreview)){let e=window.open("","_blank");e&&(e.document.open(),e.document.write(a.htmlPreview),e.document.close())}}catch(a){e=await r.text()}throw Error(e||"Unable to export board deck.")}let n=await r.blob(),s=window.URL.createObjectURL(n),l=document.createElement("a");l.href=s,l.download="RA-Board-Deck.pdf",l.click(),window.URL.revokeObjectURL(s)}catch(e){window.alert(e instanceof Error?e.message:"Unable to export board deck.")}}return(0,r.jsxs)("section",{className:"bg-white rounded-xl border border-neutral-200 p-8 space-y-8",children:[(0,r.jsx)("div",{className:"flex justify-end mb-2",children:(0,r.jsx)("button",{onClick:()=>c(!o),className:"px-4 py-2 rounded-md text-sm font-medium border ".concat(o?"bg-black text-white border-black":"bg-white text-neutral-700 border-neutral-300"),children:o?"Exit Investor Mode":"Investor Summary Mode"})}),o?(0,r.jsx)(()=>(0,r.jsxs)("section",{id:"investor-summary-print",className:"jsx-bd115bf26cc1ae79 bg-neutral-900 text-white rounded-xl p-10 space-y-10",children:[(0,r.jsxs)("div",{className:"jsx-bd115bf26cc1ae79 flex items-center justify-between gap-4",children:[(0,r.jsx)("h2",{className:"jsx-bd115bf26cc1ae79 text-2xl font-semibold",children:"Investor Summary"}),(0,r.jsx)("button",{onClick:()=>window.print(),className:"jsx-bd115bf26cc1ae79 bg-white text-black px-5 py-2 rounded-md text-sm font-medium print:hidden",children:"Download Investor Summary (PDF)"}),(0,r.jsx)("button",{onClick:ee,className:"jsx-bd115bf26cc1ae79 bg-white text-black px-5 py-2 rounded-md text-sm font-medium print:hidden",children:"Export Full Board Deck"})]}),(0,r.jsxs)("div",{className:"jsx-bd115bf26cc1ae79 grid md:grid-cols-3 gap-8",children:[(0,r.jsx)(j,{label:(0,r.jsxs)(r.Fragment,{children:["Final Year ",s.ARR()]}),value:l(Z.finalYearARR)}),(0,r.jsx)(j,{label:(0,r.jsxs)(r.Fragment,{children:[s.ARR()," CAGR"]}),value:i(100*Z.arrCagr)}),(0,r.jsx)(j,{label:"Net Revenue Retention",value:i(Z.netRevenueRetentionPct)}),(0,r.jsx)(j,{label:"Gross Margin",value:i(Q)}),(0,r.jsx)(j,{label:(0,r.jsxs)(r.Fragment,{children:["Final Year ",s.EBITDA()]}),value:l(Z.finalYearSaasEbitda)}),(0,r.jsx)(j,{label:(0,r.jsxs)(r.Fragment,{children:[s.EBITDA()," Margin"]}),value:i(Z.saasEbitdaMarginPct)}),(0,r.jsx)(j,{label:s.IRR(),value:null!==Z.irr?i(100*Z.irr):"N/A"}),(0,r.jsx)(j,{label:(0,r.jsxs)(r.Fragment,{children:[Z.safeProjectionYears,"-Year ",s.NPV()]}),value:l(Z.npv)}),(0,r.jsx)(j,{label:"Payback Period",value:Z.paybackYear?"".concat(Z.paybackYear," yrs"):"N/A"}),(0,r.jsx)(j,{label:(0,r.jsxs)(r.Fragment,{children:[s.ARR()," Valuation"]}),value:l(Z.arrValuationImpact)}),(0,r.jsx)(j,{label:(0,r.jsxs)(r.Fragment,{children:[s.EBITDA()," Valuation"]}),value:l(Z.ebitdaValuationImpact)}),(0,r.jsx)(j,{label:"Rule of 40",value:i(Z.ruleOf40Pct)})]}),(0,r.jsx)(b(),{id:"bd115bf26cc1ae79",children:"@media print{body *{visibility:hidden}#investor-summary-print,#investor-summary-print *{visibility:visible}#investor-summary-print{position:absolute;left:0;top:0;width:100%;background:white!important;color:black!important;-webkit-border-radius:0!important;-moz-border-radius:0!important;border-radius:0!important;padding:24px!important}}"})]}),{}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Enterprise Deployment, Sensitivity & Payback Model"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-neutral-700",children:"Sensitivity"}),(0,r.jsx)("div",{className:"flex gap-2 flex-wrap",children:["low","base","high"].map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>m(e),className:"px-4 py-2 rounded-md text-sm font-medium border ".concat(u===e?"bg-black text-white border-black":"bg-white text-neutral-700 border-neutral-300"),children:e.toUpperCase()},e))})]}),(0,r.jsxs)("div",{className:"space-y-3 border-t border-neutral-200 pt-6",children:[(0,r.jsxs)("div",{className:"text-sm font-semibold text-neutral-700",children:[s.ARR()," Capture Band"]}),(0,r.jsx)("div",{className:"flex gap-2 flex-wrap",children:["low","base","high"].map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>N(e),className:"px-4 py-2 rounded-md text-sm font-medium border ".concat(x===e?"bg-black text-white border-black":"bg-white text-neutral-700 border-neutral-300"),children:[e.toUpperCase()," Capture"]},e))})]}),(0,r.jsxs)("div",{className:"border-t border-neutral-200 pt-6 space-y-6",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-neutral-700",children:"Net Revenue Retention Assumptions"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,r.jsx)(v,{label:"Gross Churn (%)",value:U,onChange:G}),(0,r.jsx)(v,{label:"Expansion (%)",value:_,onChange:z}),(0,r.jsx)(g,{title:"Net Revenue Retention",value:i(Z.netRevenueRetentionPct)})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 border-t border-neutral-200 pt-6",children:[(0,r.jsx)(v,{label:"Total Facilities",value:w,onChange:y}),(0,r.jsx)(v,{label:"Deployment Duration (Years)",value:P,onChange:C}),(0,r.jsx)(v,{label:"Projection Horizon (Years)",value:M,onChange:S}),(0,r.jsx)(v,{label:"Discount Rate (%)",value:A,onChange:k}),(0,r.jsx)(v,{label:(0,r.jsxs)(r.Fragment,{children:[s.EBITDA()," Valuation Multiple"]}),value:F,onChange:E}),(0,r.jsx)(v,{label:(0,r.jsxs)(r.Fragment,{children:[s.ARR()," Valuation Multiple"]}),value:I,onChange:T})]}),(0,r.jsxs)("div",{className:"border-t border-neutral-200 pt-6 space-y-6",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-neutral-700",children:"Capital & Operating Assumptions (Per Facility)"}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,r.jsx)(v,{label:"Hardware Cost (One-Time)",value:L,onChange:D}),(0,r.jsx)(v,{label:"Implementation Cost (One-Time)",value:B,onChange:Y}),(0,r.jsx)(v,{label:"Annual Subscription Cost",value:V,onChange:O})]})]}),(0,r.jsxs)("div",{className:"border-t border-neutral-200 pt-6 space-y-6",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-neutral-700",children:[s.SaaS()," Operating Assumptions"]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-4 gap-6",children:[(0,r.jsx)(v,{label:"Gross Margin (%)",value:Q,onChange:H}),(0,r.jsx)(v,{label:"Sales & Marketing (%)",value:$,onChange:q}),(0,r.jsx)(v,{label:(0,r.jsxs)(r.Fragment,{children:[s.RD()," (%)"]}),value:J,onChange:K}),(0,r.jsx)(v,{label:(0,r.jsxs)(r.Fragment,{children:[s.GA()," (%)"]}),value:W,onChange:X})]})]}),(0,r.jsxs)("div",{className:"border-t border-neutral-200 pt-6 grid md:grid-cols-3 gap-6",children:[(0,r.jsx)(g,{title:(0,r.jsxs)(r.Fragment,{children:["Annual Portfolio ",s.EBITDA()," Lift"]}),value:l(Z.annualPortfolioImpact)}),(0,r.jsx)(g,{title:"Portfolio Margin Improvement",value:i(Z.portfolioMarginLiftPct)}),(0,r.jsx)(g,{title:(0,r.jsxs)(r.Fragment,{children:[Z.safeProjectionYears,"-Year Gross ",s.EBITDA()," Lift"]}),value:l(Z.cumulativeImpact)})]}),(0,r.jsxs)("div",{className:"border-t border-neutral-200 pt-6 grid md:grid-cols-3 gap-6",children:[(0,r.jsx)(g,{title:"Cumulative Net Benefit",value:l(Z.cumulativeNet)}),(0,r.jsx)(g,{title:"Payback Period",value:Z.paybackYear?"".concat(Z.paybackYear," Year(s)"):"Beyond Projection"}),(0,r.jsx)(g,{title:(0,r.jsxs)(r.Fragment,{children:[s.ROI()," Multiple"]}),value:"".concat(Z.roiMultiple.toFixed(2),"\xd7")})]}),(0,r.jsxs)("div",{className:"border-t border-neutral-200 pt-6 grid md:grid-cols-3 gap-6",children:[(0,r.jsx)(g,{title:"Net Present Value",value:l(Z.npv)}),(0,r.jsx)(g,{title:"Internal Rate of Return",value:null!==Z.irr?i(100*Z.irr):"N/A"}),(0,r.jsx)(g,{title:"Discount Rate",value:i(A)})]}),(0,r.jsxs)("div",{className:"border-t border-neutral-200 pt-8",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-neutral-700 mb-4",children:[s.ARR()," Ramp (",s.NRR()," + Capture)"]}),(0,r.jsx)("div",{className:"space-y-2 text-sm",children:Z.arrByYear.map((e,a)=>(0,r.jsxs)("div",{className:"flex justify-between border-b border-neutral-100 pb-2",children:[(0,r.jsxs)("span",{children:["Year ",a+1]}),(0,r.jsx)("span",{children:l(e)})]},a))})]}),(0,r.jsxs)("div",{className:"border-t border-neutral-200 pt-6 grid md:grid-cols-4 gap-6",children:[(0,r.jsx)(g,{title:(0,r.jsxs)(r.Fragment,{children:["Final Year ",s.ARR()]}),value:l(Z.finalYearARR)}),(0,r.jsx)(g,{title:(0,r.jsxs)(r.Fragment,{children:[s.ARR()," Multiple"]}),value:"".concat(I,"\xd7")}),(0,r.jsx)(g,{title:(0,r.jsxs)(r.Fragment,{children:["Implied ",s.ARR()," Valuation"]}),value:l(Z.arrValuationImpact)}),(0,r.jsx)(g,{title:(0,r.jsxs)(r.Fragment,{children:["Per-Facility ",s.LTV()," (Approx.)"]}),value:Z.ltvPerFacility?l(Z.ltvPerFacility):"N/A"})]}),(0,r.jsxs)("div",{className:"border-t border-neutral-200 pt-8",children:[(0,r.jsxs)("h3",{className:"text-sm font-semibold text-neutral-700 mb-4",children:[s.SaaS()," ",s.EBITDA()," Projection"]}),(0,r.jsx)("div",{className:"space-y-2 text-sm mb-6",children:Z.saasEbitdaByYear.map((e,a)=>(0,r.jsxs)("div",{className:"flex justify-between border-b border-neutral-100 pb-2",children:[(0,r.jsxs)("span",{children:["Year ",a+1]}),(0,r.jsx)("span",{children:l(e)})]},a))}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,r.jsx)(g,{title:(0,r.jsxs)(r.Fragment,{children:["Final Year ",s.SaaS()," ",s.EBITDA()]}),value:l(Z.finalYearSaasEbitda)}),(0,r.jsx)(g,{title:(0,r.jsxs)(r.Fragment,{children:[s.EBITDA()," Margin"]}),value:i(Z.saasEbitdaMarginPct)}),(0,r.jsx)(g,{title:(0,r.jsxs)(r.Fragment,{children:[s.EBITDA()," Valuation Impact"]}),value:l(Z.ebitdaValuationImpact)})]})]}),(0,r.jsxs)("div",{className:"border-t border-neutral-200 pt-8",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-neutral-700 mb-4",children:"Cohort Expansion View"}),(0,r.jsx)("div",{className:"space-y-2 text-sm",children:Z.cohortFinalYearContributions.map((e,a)=>(0,r.jsxs)("div",{className:"flex justify-between border-b border-neutral-100 pb-2",children:[(0,r.jsx)("span",{children:e.label}),(0,r.jsx)("span",{children:l(e.value)})]},a))})]}),(0,r.jsxs)("div",{className:"border-t border-neutral-200 pt-8",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-neutral-700 mb-4",children:"Scenario Comparison"}),(0,r.jsx)("div",{className:"grid md:grid-cols-3 gap-6 text-sm",children:Z.scenarios.map(e=>{let t=a*e.multiplier*w;return(0,r.jsxs)("div",{className:"border border-neutral-200 rounded-md p-4",children:[(0,r.jsxs)("div",{className:"text-neutral-500 mb-2",children:[e.name," Case"]}),(0,r.jsx)("div",{className:"text-lg font-semibold",children:l(t)}),(0,r.jsxs)("div",{className:"text-neutral-500 mt-1",children:["Annual Portfolio ",s.EBITDA()," Lift"]})]},e.name)})})]})]})]})}let w={annualTonsProcessed:25e3,avgMaterialCostPerTon:850,annualFabricationRevenue:4e7,annualFabricationLaborCost:6e6,incrementalContributionMarginPct:20,currentScrapRatePct:8,targetScrapRatePct:6.5,preventableReworkLaborPct:4,reworkReductionPct:40,throughputImprovementPct:2,includeOversightRisk:!0,annualQALaborCost:5e5,annualMajorErrorCost:25e4,errorReductionPct:30};function y(){let[e,a]=(0,n.useState)(w),[t,l]=(0,n.useState)(null),[i,o]=(0,n.useState)(!1),[u,x]=(0,n.useState)(""),b=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(!t||!b.current)return;o(!1);let e=window.matchMedia("(prefers-reduced-motion: reduce)").matches,a=window.scrollY,r=Math.max(0,b.current.getBoundingClientRect().top+window.scrollY-.35*window.innerHeight);if(e){window.scrollTo({top:r,behavior:"auto"}),o(!0);return}let n=window.setTimeout(()=>{o(!0)},0),s=0,l=performance.now(),i=e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,c=e=>{let t=Math.min((e-l)/2500,1),n=i(t);window.scrollTo(0,a+(r-a)*n),t<1?s=window.requestAnimationFrame(c):o(!0)};return s=window.requestAnimationFrame(c),()=>{s&&window.cancelAnimationFrame(s),window.clearTimeout(n)}},[t]),(0,r.jsxs)("div",{className:"space-y-12",children:[(0,r.jsx)("section",{className:"bg-white rounded-xl border border-neutral-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-medium",children:"Execution errors quietly erode margin."}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-neutral-600",children:["This model estimates ",(0,r.jsx)(d,{acronym:"EBITDA",caption:"Earnings Before Interest, Taxes, Depreciation, and Amortization"})," impact from material efficiency, labor efficiency, throughput capacity, and oversight risk reduction."]})]}),(0,r.jsxs)("div",{className:"rounded-lg border border-neutral-200 p-4 text-sm min-w-56",children:[(0,r.jsx)("div",{className:"text-neutral-500",children:"Signal"}),(0,r.jsx)("div",{className:"font-semibold mt-1",children:"A 1% scrap shift can materially impact EBITDA."})]})]})}),(0,r.jsx)(c,{inputs:e,setInputs:a}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("button",{onClick:function(){try{l(function(e){!function(e){for(let a of["annualTonsProcessed","avgMaterialCostPerTon","annualFabricationRevenue","annualFabricationLaborCost","incrementalContributionMarginPct","currentScrapRatePct","targetScrapRatePct","preventableReworkLaborPct","reworkReductionPct","throughputImprovementPct","includeOversightRisk"])if("number"!=typeof e[a]&&"boolean"!=typeof e[a])throw Error("Missing or invalid input: ".concat(a));if(e.annualTonsProcessed<0)throw Error("annualTonsProcessed must be >= 0");if(e.avgMaterialCostPerTon<0)throw Error("avgMaterialCostPerTon must be >= 0");if(e.annualFabricationRevenue<0)throw Error("annualFabricationRevenue must be >= 0");if(e.annualFabricationLaborCost<0)throw Error("annualFabricationLaborCost must be >= 0");if(e.includeOversightRisk)for(let a of["annualQALaborCost","annualMajorErrorCost","errorReductionPct"]){if("number"!=typeof e[a])throw Error("Missing oversight/risk input: ".concat(a));if(e[a]<0)throw Error("".concat(a," must be >= 0"))}}(e);let a=s(e.currentScrapRatePct,0,100),t=s(e.targetScrapRatePct,0,100),r=s(e.preventableReworkLaborPct,0,100),n=s(e.reworkReductionPct,0,100),l=s(e.throughputImprovementPct,0,100),i=s(e.incrementalContributionMarginPct,0,100),o=Math.max(0,e.annualTonsProcessed)/25e3,c=e.annualTonsProcessed*(Math.max(0,a-t)/100),d=c*e.avgMaterialCostPerTon,u=e.annualFabricationLaborCost*o*(r/100)*(n/100),m=e.annualFabricationRevenue*o,x=l/100*m,b=i/100*x,h=0;if(e.includeOversightRisk){let a=s(e.errorReductionPct,0,100);h=e.annualQALaborCost*o*(a/100)+e.annualMajorErrorCost*o*(a/100)}let p=d+u+b+h;return{material:{tonsSaved:c,dollarsSaved:d},labor:{dollarsSaved:u},throughput:{incrementalRevenue:x,ebitdaContribution:b},oversightRisk:{dollarsSaved:h},totals:{annualEbitdaIncrease:p,ebitdaMarginImprovementPct:m>0?p/m*100:0},pricing:{lowFrictionAnnual:.08*p,baseAnnual:.12*p,aggressiveAnnual:.15*p}}}(e)),x("")}catch(e){x((null==e?void 0:e.message)||"Unable to compute model."),l(null)}},className:"bg-black text-white px-6 py-3 rounded-md text-sm font-medium hover:bg-neutral-800 transition",children:"Calculate Margin Impact"})}),u&&(0,r.jsx)("p",{className:"text-sm text-red-600 text-center",children:u}),t&&(0,r.jsxs)("div",{ref:b,className:"space-y-12",children:[(0,r.jsx)("div",{className:"overflow-hidden transition-all duration-[2500ms] ease-out ".concat(i?"max-h-[1200px] translate-y-0 opacity-100":"max-h-0 translate-y-6 opacity-0"),children:(0,r.jsx)(m,{results:t})}),(0,r.jsx)(N,{perFacilityEbitdaIncrease:t.totals.annualEbitdaIncrease,perFacilityRevenue:e.annualFabricationRevenue})]})]})}}},function(e){e.O(0,[164,470,594,744],function(){return e(e.s=9090)}),_N_E=e.O()}]);